/* Page layouts for split-phase online UI (v0.2) */
html, body { height: 100%; }
.app { min-height: 100vh; display: flex; flex-direction: column; }
.top { position: sticky; top: 0; z-index: 5; backdrop-filter: blur(8px); }
.main { flex: 1; display: flex; flex-direction: column; gap: 12px; }
.twoCol { flex: 1; display: grid; grid-template-columns: 340px 1fr; gap: 12px; align-items: start; }
@media (max-width: 860px){
  .twoCol { grid-template-columns: 1fr; }
}
.panel { height: 100%; }
.card.tight { padding: 14px; }
.small { font-size: 0.9rem; opacity: .9; }
.handDock{ margin-top:auto; }

/* Bidding: show the player's hand at full brightness even though cards are not playable. */
body.page-bidding .cardbtn:disabled{ opacity: 1; }
body.page-bidding .cardbtn:disabled .playingcard{ filter: none; }

/* Bids list items (also used as deal-animation targets on the bidding page) */
.bidItem{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.18);
  margin: 2px 4px 2px 0;
  white-space: nowrap;
}

/* Overlay hand onto the board (more realistic) */
body.page-play .boardPanel{ position:relative; }
body.page-play .handDock{
  position:absolute;
  /* Place the hand on the LEFT side of the board so it doesn't cover the bottom seat status. */
  left: 18px;
  right: auto;
  /* Hand overlays the board, but must NOT cover the bottom seat (name/tricks/pile). */
  bottom: 150px;
  transform: none;
  width: min(720px, 92%);
  z-index: 7;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  pointer-events: none;
}
body.page-play .handDock #olHands{ pointer-events:auto; }
body.page-play .handDock #olWarn{ pointer-events:auto; }
body.page-play .handDock .hand{
  background: transparent;
  border: none;
  padding: 0;
}
body.page-play .handDock .hand .head{ display:none; }
body.page-play .handDock .cards{
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: visible;
  padding: 6px 10px;
  gap: 0;
  align-items: flex-end;
}
body.page-play .handDock .cards .cardbtn{
  margin-left: -28px;
}
body.page-play .handDock .cards .cardbtn:first-child{ margin-left: 0; }
body.page-play .handDock .cards .cardbtn{
  position: relative;
  z-index: 1;
}
body.page-play .handDock .cards .cardbtn:hover{ z-index: 5; }
body.page-play .handDock .cards .cardbtn:focus{ z-index: 6; }

/* Bottom seat should stay visible because the hand is positioned above it. */

@media (max-width: 860px){
  body.page-play .handDock{ left: 50%; right: auto; transform: translateX(-50%); bottom: 150px; width: 98%; }
  body.page-play .handDock .cards .cardbtn{ margin-left: -22px; }
}
@media (max-width: 480px){
  body.page-play .handDock{ bottom: 130px; }
}

.centerArea { display:flex; flex-direction:column; gap:12px; min-height: 0; }

/* The board should use all available vertical space (avoid unused gap above the bottom bar).
   The inner .board must stretch to the flexed container height. */
.playBoard { flex:1; min-height: 0; }
.playBoard .board{ height: 100%; min-height: 0; }

/* Deck anchor used for deal-animation (ghost cards fly from here) */
.olDeck{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 54px;
  height: 76px;
  border-radius: 12px;
  opacity: .82;
  pointer-events: none;
  z-index: 2;
}

.miniDeckRow{ display:flex; justify-content:flex-end; margin:-6px 0 6px; }
.miniDeck{ width: 48px; height: 68px; border-radius: 12px; opacity:.9; pointer-events:none; }


/* === Round table board === */

.playLayout { grid-template-columns: 360px 1fr; }

/* Optional: hide the left players panel on the play page (user toggle) */
body.hidePlayersPanel .playersPanel{ display:none !important; }
body.hidePlayersPanel .twoCol.playLayout{ grid-template-columns: 1fr !important; }
/* Let the board stretch instead of forcing a fixed minimum height (prevents unused empty space). */
.playBoard { min-height: 0; }
.board {
  position: relative;
  width: 100%;
  min-height: 0;
  border-radius: 22px;
  background: radial-gradient(ellipse at center, rgba(255,255,255,.08) 0%, rgba(0,0,0,.18) 58%, rgba(0,0,0,.28) 100%);
  border: 1px solid rgba(255,255,255,.08);
  overflow: hidden;
}

/* Mobile/compact play: use the full viewport and avoid vertical scrolling */
@media (max-width: 860px){
  body.page-play .playersPanel{ display:none; }
  body.page-play .playLayout{ grid-template-columns: 1fr; }
  body.page-play .centerArea{ gap: 8px; }

  /* Give the board the screen; the hand overlays it */
  body.page-play .playBoard{ min-height: 0; }
  body.page-play .board{
    min-height: 0;
    height: calc(100dvh - 120px);
  }

  /* Hide the footer on the play page to save space */
  body.page-play .footer{ display:none; }
}

@media (max-width: 480px){
  body.page-play .board{ height: calc(100dvh - 112px); }
}

/* v0.2.32: dynamic seats/trick slots (2â€“8 players) */
.boardSeats{
  position:absolute;
  inset:0;
  z-index:4;
}

.boardSeats .seat{
  position:absolute;
  transform:translate(-50%,-50%);
  text-align:center;
  max-width:240px;
}

.boardSeats .seatBadges{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  justify-content:center;
}

/* Visual trick counter (at-a-glance) */
.boardSeats .trickViz{
  display:flex;
  gap:4px;
  justify-content:center;
  align-items:center;
  margin-top:6px;
  min-height: 12px;
}
.boardSeats .trickViz .dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.85);
  box-shadow: 0 2px 6px rgba(0,0,0,.35);
}
.boardSeats .trickViz .more,
.boardSeats .trickViz .zero{
  font-size: .85rem;
  font-weight: 900;
  opacity: .9;
}

.trickSlots{
  position:absolute;
  inset:0;
}

.trickSlots .played{
  position:absolute;
  transform:translate(-50%,-50%);
}

/* Winner toast (shown after each trick and at end of round) */
.winnerToast{
  position:absolute;
  left:50%;
  top:14px;
  transform:translateX(-50%);
  padding:10px 14px;
  border-radius: 999px;
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.16);
  box-shadow: 0 18px 45px rgba(0,0,0,.45);
  font-weight: 900;
  letter-spacing: .2px;
  z-index: 6;
}

/* Ensure center trick area + played cards always render above seats */
.deck{ z-index: 1; }
.seat{ z-index: 2; }
.centerPile{ z-index: 3; }
.played{ z-index: 4; pointer-events:none; }
.centerPile {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 380px;
  height: 380px;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  /* Let the played cards overlap the circle edge (more realistic) */
  overflow: visible;
  border: 2px dashed rgba(255,255,255,.18);
  background: transparent;
}
.played {
  position: absolute;
  width: 104px;
  height: 146px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.played :is(button,.cardEl){ transform: scale(1.0); }

/* Bigger cards on the play page */
/* Larger cards on the play page */
body.page-play .playingcard{ width:96px; height:134px; border-radius:16px; }
@media (max-width: 480px){
  body.page-play .playingcard{ width:74px; height:106px; border-radius:14px; }
}
/* Push played cards slightly outside the circle so they overlap the edge */
.played-top { left: 50%; top: -28px; transform: translateX(-50%); }
.played-bottom { left: 50%; bottom: -28px; transform: translateX(-50%); }
.played-left { left: -28px; top: 50%; transform: translateY(-50%); }
.played-right { right: -28px; top: 50%; transform: translateY(-50%); }

.seat{
  position:absolute;
  width: 170px;
  max-width: 38%;
  padding: 8px 10px;
  border-radius: 18px;
  background: rgba(0,0,0,.10);
  border: 1px solid rgba(255,255,255,.10);
}

/* During play, keep Bud + Stik visible; hide only Total to reduce clutter */
body.phase-playing .seatBadges .totalChip,
body.phase-between_tricks .seatBadges .totalChip{ display:none; }

body.page-play .footer{ display:none; }

/* Bottom bar replaces the removed top header */
.bottomBar{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-radius: 18px;
  background: rgba(0,0,0,.22);
  border: 1px solid rgba(255,255,255,.10);
}
.bottomLeft,.bottomMid,.bottomRight{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.bottomMid{ justify-content:center; flex: 1; }
.bottomRight{ justify-content:flex-end; }

/* During actual play we prioritize the board: hide the left panel and let the board take full width */
body.phase-playing .playersPanel,
body.phase-between_tricks .playersPanel{ display:none; }
body.phase-playing .playLayout,
body.phase-between_tricks .playLayout{ grid-template-columns: 1fr; }
.seatName{ font-weight: 800; letter-spacing: .2px; }
.seatBadges{ margin-top:6px; display:flex; flex-wrap:wrap; gap:6px; justify-content:center; }
.chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:3px 7px;
  border-radius: 999px;
  font-size: .78rem;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.08);
}
.chip.ghost{ opacity: .75; }
/* Per-seat won-tricks mini pile (destination for the sweep animation)
   Rendered as a small stack of cards near each seat (more realistic than a global pile). */
.seatPile{
  margin-top: 8px;
  width: 44px;
  height: 60px;
  border-radius: 10px;
  /* Per-seat won-tricks pile uses the fixed card back image */
  background-image: var(--cardback-url);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border: 1px solid rgba(255,255,255,.14);
  position: relative;
  overflow: visible;
}
.seatPile::before,
.seatPile::after{
  content: "";
  position:absolute;
  left: 0;
  top: 0;
  width: 44px;
  height: 60px;
  border-radius: 10px;
  background-image: var(--cardback-url);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border: 1px solid rgba(255,255,255,.10);
}
.seatPile::before{ transform: translate(4px, 4px) rotate(4deg); opacity: .55; }
.seatPile::after{ transform: translate(8px, 8px) rotate(8deg); opacity: .30; }

.seat-top { left: 50%; top: 6px; transform: translateX(-50%); text-align:center; }
.seat-bottom { left: 50%; bottom: 22px; transform: translateX(-50%); text-align:center; }
.seat-left { left: 6px; top: 50%; transform: translateY(-50%); }
.seat-right { right: 6px; top: 50%; transform: translateY(-50%); }

/* No global deck pile on the play board in v0.2.40+ (we use per-seat piles instead). */

/* Prevent overflow in the left panel on the play page */
.playersPanel .table .slot .name { white-space: normal; }
.playersPanel .table { overflow: hidden; }

/* Mobile */
@media (max-width: 860px){
  .playLayout { grid-template-columns: 1fr; }
  .boardPanel { order: 1; }
  .playersPanel { order: 2; }
  .board { min-height: 420px; }
  .seat { width: 46%; max-width: 46%; padding: 8px 10px; }
  .seat-left, .seat-right { top: 14px; transform: none; }
  .seat-left { left: 14px; }
  .seat-right { right: 14px; }
  .seat-top { top: auto; left: 14px; bottom: 14px; transform:none; text-align:left; }
  .seat-bottom { left:auto; right:14px; bottom:22px; transform:none; text-align:right; }
  .centerPile { width: 280px; height: 280px; }
  .played-top { top: -18px; }
  .played-bottom { bottom: -18px; }
  .played-left { left: -18px; }
  .played-right { right: -18px; }
}
@media (max-width: 480px){
  .board { min-height: 380px; }
  .seat { font-size: .92rem; }
  .chip { font-size: .72rem; padding: 3px 7px; }
  .centerPile { width: 220px; height: 220px; }
  .played { width: 92px; height: 130px; }
  .played-top { top: -14px; }
  .played-bottom { bottom: -14px; }
  .played-left { left: -14px; }
  .played-right { right: -14px; }
}

.scoreRow{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.scoreRow:last-child{ border-bottom: none; }
.pill.tiny{ padding: 3px 8px; font-size: .82rem; }

/* (deprecated) Older hand-overlay rules removed in v0.2.40.
   The authoritative hand overlay + spacing rules live near the top of this file. */
